<!doctype html>
<html lang="de">
<head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Magier Login</title>
<link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <main style="padding:18px;max-width:720px;margin:40px auto;">
    <h1>Magier Login</h1>
    <p>Falls du den Admin-Key hast, gib ihn hier ein. Ohne Key (Dev) einfach auf "Einloggen" klicken.</p>
    <input id="keyInput" placeholder="Admin Key (optional)">
    <div style="margin-top:12px;">
      <button id="loginBtn">Einloggen</button>
    </div>
    <div id="msg" style="margin-top:12px;color:#aaa;"></div>
  </main>
<script>
  document.getElementById('loginBtn').addEventListener('click', async ()=>{
    const key = document.getElementById('keyInput').value.trim();
    try {
      const res = await fetch('/auth/login', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(key?{key}: {})});
      const j = await res.json();
      if (!res.ok) return alert('Login fehlgeschlagen: '+(j.error||JSON.stringify(j)));
      // redirect to dashboard
      location.href = '/magician/dashboard.html';
    } catch(e){ alert('Netzwerkfehler'); }
  });
</script>
</body></html>
